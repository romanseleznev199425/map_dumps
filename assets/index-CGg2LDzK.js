(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();const I=[{coords:[47.238679,39.774005],properties:{hintContent:"Свалка №1",balloonContent:"Несанкционированная свалка мусора",address:"Ростов на дону Школьная улица, 23А",area:"100 м²",type:"Бытовые отходы",status:"active"}},{coords:[47.237217,39.773637],properties:{hintContent:"Свалка №2",balloonContent:"Несанкционированная свалка мусора",address:"Ростов на дону улица 40-я Линия, 29",area:"10 м²",type:"Бытовые отходы",status:"active"}},{coords:[47.28164,39.691818],properties:{hintContent:"Свалка №3",balloonContent:"Несанкционированная свалка мусора",address:"Ростов на дону Ольгинская улица, 20",area:"5 м²",type:"Бытовые отходы",status:"active"}},{coords:[47.226833,39.713728],properties:{hintContent:"Свалка №4",balloonContent:"Несанкционированная свалка мусора",address:"Ростов на дону ул. Промышленная, 15",area:"50 м²",type:"Бытовые отходы",status:"removed"}},{coords:[47.278339,39.678371],properties:{hintContent:"Свалка №5",balloonContent:"Несанкционированная свалка мусора",address:"Ростов на дону Парадная улица, 47",area:"50 м²",type:"Бытовые отходы",status:"removed"}},{coords:[47.229611,39.718355],properties:{hintContent:"Свалка №6",balloonContent:"Несанкционированная свалка мусора",address:"Ростов на дону проспект Соколова, 57",area:"50 м²",type:"Бытовые отходы",status:"atWork"}}],S=[{coords:[47.236833,39.723728],properties:{hintContent:"Полигон №1",balloonContent:"Официальный полигон МЭОК",address:"Ростов на дону ш. Ростовское, 25 км",capacity:"10000 тонн/мес",license:"№Л-123-456",status:"active"}},{coords:[47.341282,39.696094],properties:{hintContent:"Полигон №2",balloonContent:"Официальный полигон МЭОК",address:"Ростов на дону Домовитая улица, 2",capacity:"10000 тонн/мес",license:"№Л-123-456",status:"removed"}},{coords:[47.363391,39.832606],properties:{hintContent:"Полигон №3",balloonContent:"Официальный полигон МЭОК",address:"Ростов на дону СНТ Ветеран",capacity:"10000 тонн/мес",license:"№Л-123-456",status:"active"}}],B=[{coords:[47.2413,39.837096],properties:{hintContent:"Пункт приема №1",balloonContent:"Прием вторсырья",address:"ул. Экологическая, 8",materials:"Пластик, стекло, бумага",schedule:"Пн-Пт 9:00-18:00",status:"active"}}],W={dumps:I,polygons:S,receptions:B},f=W,{createApp:j,onMounted:z,ref:c,computed:E}=Vue,F=j({setup(){const m=c(null),n=c(f.dumps),r=c("dumps"),i=c(!0);let e=null,t=null;const a=c(!1),C=c({}),b=c({}),$=E(()=>n.value.map(l=>({title:l.properties.hintContent,details:l.properties.balloonContent,...l.properties})));z(()=>{typeof ymaps<"u"?y():window.addEventListener("load",y)});function y(){ymaps.ready(()=>{e=new ymaps.Map(m.value,{center:[47.222109,39.718813],zoom:9}),A(),d()})}function A(){t=new ymaps.Clusterer({clusterDisableClickZoom:!0,clusterOpenBalloonOnClick:!1,clusterIconLayout:"default#pieChart",clusterIconPieChartRadius:25,clusterIconPieChartCoreRadius:15,clusterIconPieChartStrokeWidth:2,clusterBalloonContentLayout:"cluster#balloonCarousel",clusterBalloonItemContentLayout:"my#customLayout",clusterBalloonPanelMaxMapArea:0}),e.geoObjects.add(t),t.events.add("click",l=>{const p=l.get("target");if(p instanceof ymaps.Placemark){const s=p.properties.getAll();C.value={hintContent:s.hintContent||"Метка на карте",balloonContent:s.balloonContent||"",address:s.address||"не указан",area:s.area||"",type:s.type||"",clusterSize:null},a.value=!0}else{const s=p.getGeoObjects(),g={dumps:{removed:"Свалочный очаг ликвидирован",active:"Активный свалочный очаг",atWork:"Идет ликвидация свалочного очага"},polygons:{removed:"Полигон закрыт",active:"Полигон работает",atWork:"Полигон временно не работает"},receptions:{removed:"Пункт закрыт",active:"Пункт работает",atWork:"Пункт временно не работает"}};let v='<div class="cluster-content">';s.forEach((O,h)=>{const o=O.properties.getAll(),w=(g[r.value]||{})[o.status]||"Неизвестный статус";let u=`
                <div class="cluster-marker">
                  <h4>${o.hintContent||`Метка ${h+1}`}</h4>
                  <p>${o.balloonContent||""}</p>
                  <p><strong>Адрес:</strong> ${o.address||"не указан"}</p>
              `;r.value==="dumps"?u+=`
                  ${o.area?`<p><strong>Площадь:</strong> ${o.area}</p>`:""}
                  ${o.type?`<p><strong>Тип отходов:</strong> ${o.type}</p>`:""}
                `:r.value==="polygons"?u+=`
                  ${o.capacity?`<p><strong>Мощность:</strong> ${o.capacity}</p>`:""}
                  ${o.license?`<p><strong>Лицензия:</strong> ${o.license}</p>`:""}
                `:r.value==="receptions"&&(u+=`
                  ${o.materials?`<p><strong>Принимаемые материалы:</strong> ${o.materials}</p>`:""}
                  ${o.schedule?`<p><strong>Режим работы:</strong> ${o.schedule}</p>`:""}
                `),u+=`
                  <p><strong>Статус:</strong> ${w}</p>
                </div>
                ${h<s.length-1?"<hr>":""}
              `,v+=u}),v+="</div>",C.value={hintContent:"Свалочные очаги",balloonContent:v,clusterSize:s.length,isCluster:!0},a.value=!0}})}const M=()=>{a.value=!1};function d(){if(!t)return;t.removeAll();const l={active:"#FF0000",atWork:"#ff7c53",removed:"#00AA00"},p=n.value.map(s=>new ymaps.Placemark(s.coords,s.properties,{preset:"islands#"+s.properties.status+"Icon",iconColor:l[s.properties.status]||"#AAAAAA",balloonCloseButton:!1,hasBalloon:!1}));t.add(p)}function P(){n.value=f.dumps,r.value="dumps",d()}function k(){n.value=f.polygons,r.value="polygons",d()}function L(){n.value=f.receptions,r.value="receptions",d()}return setTimeout(()=>{i.value=!1},800),{mapContainer:m,mapMmarker:n,activeTab:r,markersInfo:$,isLoading:i,showPopup:a,activeMarkerInfo:C,activeCklasrerInfo:b,showDumps:P,showPolygons:k,showReceptions:L,closePopup:M}}});F.mount("#app");
